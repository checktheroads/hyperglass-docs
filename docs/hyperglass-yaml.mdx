---
id: hyperglass-yaml
title: hyperglass.yaml Reference
sidebar_label: hyperglass.yaml
---

import Admonition from "react-admonitions";
import {
  Color,
  FieldName,
  FieldDefault,
  FieldDefaultBlock,
  Regex
} from "./components.jsx";
import styles from "./schematable.module.css";

## general

| Field                                               | Default                                                          | Description                                                                                                                                                                                                                                                                                      |
| --------------------------------------------------- | ---------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| <FieldName name="debug" type="boolean"/>            | <FieldDefault type="boolean" value="false"/>                     | Enable debug mode (this will generate a _lot_ of logs).                                                                                                                                                                                                                                          |
| <FieldName name="google_analytics" type="string"/>  | <FieldDefault type="string" value=""/>                           | Enables and sets [Google Analytics](https://support.google.com/analytics/answer/1008080) ID.                                                                                                                                                                                                     |
| <FieldName name="org_name" type="string"/>          | <FieldDefault type="string" value="The Company"/>                | Sets display name of your organization. This is used as the text title, and in the default terms & conditions text.                                                                                                                                                                              |
| <FieldName name="primary_asn" type="string"/>       | <FieldDefault type="string" value="65000"/>                      | Sets public ASN of your organization. This is combined with 'AS' and used as the default subtitle, and is used to generate the PeeringDB hyperlink.                                                                                                                                              |
| <FieldName name="redis_host" type="string"/>        | <FieldDefault type="string" value="localhost"/>                  | Sets the Redis server hostname or IP address, if redis is running on a separate system.                                                                                                                                                                                                          |
| <FieldName name="redis_port" type="integer"/>       | <FieldDefault type="integer" value="6379"/>                      | Sets the Redis TCP port.                                                                                                                                                                                                                                                                         |
| <FieldName name="request_timeout" type="integer"/>  | <FieldDefault type="integer" value="30"/>                        | Sets the front end timeout in seconds. An error will be displayed at the end of this timer.                                                                                                                                                                                                      |
| <FieldName name="requires_ipv6_cidr" type="array"/> | <FieldDefault type="array" value="['cisco_ios', 'cisco_nxos']"/> | Some platforms (namely Cisco IOS) are unable to perform a BGP lookup by IPv6 host address (e.g. 2001:db8::1), but must perform the lookup by prefix (e.g. 2001:db8::/48).<br/><br/> `requires_ipv6_cidr` is a list of network operating systems that require this (using Netmiko naming scheme). |

#### Example

```yaml
general:
  debug: false
  google_analytics: ""
  org_name: "The Company"
  primary_asn: "65001"
  redis_host: "localhost"
  redis_port: 6379
  request_timeout: 30
  requires_ipv6_cidr:
    - "cisco_ios"
    - "cisco_nxos"
```

## branding

| Field                                        | Default                                          | Description                                                 |
| -------------------------------------------- | ------------------------------------------------ | ----------------------------------------------------------- |
| <FieldName name="site_title" type="string"/> | <FieldDefault type="string" value="hyperglass"/> | Sets the `<title>` tag in the `<head>` section of the page. |

#### Example

```yaml
branding:
  site_name: "hyperglass"
```

### colors

<Admonition type="tip" title="Colors">

Colors may be defined in multiple standard color formats, such as hex (default), [name](https://www.w3.org/TR/SVG11/types.html#ColorKeywords), [RGB/RGBA strings](https://www.w3.org/wiki/CSS3/Color/RGBA), or [HSL strings](https://www.w3.org/wiki/CSS/Properties/color/HSL).

</Admonition>

| Field                                        | Default                                | Description                                                                                                |
| -------------------------------------------- | -------------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| <FieldName name="background" type="string"/> | <Color type="string" value="#fbfffe"/> | Sets the background color.                                                                                 |
| <FieldName name="danger" type="string"/>     | <Color type="string" value="#a21024"/> | Sets the "danger" color, which is used for error messages.                                                 |
| <FieldName name="dark" type="string"/>       | <Color type="string" value="#383541"/> | Sets the dark color.                                                                                       |
| <FieldName name="light" type="string"/>      | <Color type="string" value="#fbfffe"/> | Sets the light color.                                                                                      |
| <FieldName name="primary" type="string"/>    | <Color type="string" value="#40798c"/> | Sets the primary color, which is used for the search button, back button, and to color successful queries. |
| <FieldName name="secondary" type="string"/>  | <Color type="string" value="#330036"/> | Sets the secondary color.                                                                                  |
| <FieldName name="warning" type="string"/>    | <Color type="string" value="#eec643"/> | Sets the warning color, which is used for warning messages.                                                |

#### Example

```yaml
branding:
  colors:
    background: "#fbfffe"
    danger: "#a21024"
    dark: "#383541"
    light: "#fbfffe"
    primary: "#40798c"
    secondary: "#330036"
    warning: "#eec643"
```

### font

<Admonition type="tip" title="Fonts">

hyperglass is currently able to accept any [Google Font](https://fonts.google.com/) name. When rendering front-end assets, hyperglass will download the font in the correct formats and font weights, and serve it along with the rest of the static content.

</Admonition>

| Field                                     | Default                                         | Description                                                                    |
| ----------------------------------------- | ----------------------------------------------- | ------------------------------------------------------------------------------ |
| <FieldName name="primary" type="string"/> | <FieldDefault type="string" value="Nunito"/>    | Sets the primary font, used for almost all UI text.                            |
| <FieldName name="mono" type="string"/>    | <FieldDefault type="string" value="Fira Code"/> | Sets the monospace font, used for displaying device output in the results box. |

#### Example

```yaml
branding:
  font:
    primary: "Nunito"
    mono: "Fira Code"
```

### help_menu

| Field                                     | Default                                     | Description                                      |
| ----------------------------------------- | ------------------------------------------- | ------------------------------------------------ |
| <FieldName name="enable" type="boolean"/> | <FieldDefault type="boolean" value="true"/> | Enables or disables the help menu footer object. |

#### Example

```yaml
branding:
  help_menu:
    enable: true
```

### logo

| Field                                      | Default                                                             | Description                                                                                                                                                                                                                                                                      |
| ------------------------------------------ | ------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <FieldName name="favicons" type="string"/> | <FieldDefault type="string" value="ui/images/favicons/"/>           | Sets the path to the favicons directory. For full browser and platform compatibility, it is recommended to use [RealFaviconGenerator](https://realfavicongenerator.net/) and place all the generated files in static/custom/images/favicon/ (and update the favicons parameter). |
| <FieldName name="path" type="string"/>     | <FieldDefault type="string" value="ui/images/hyperglass-dark.png"/> | Sets the path to the logo file. This file can be any browser-compatible format, such as JPEG, PNG, or SVG.                                                                                                                                                                       |
| <FieldName name="width" type="integer"/>   | <FieldDefault type="integer" value="384"/>                          | Sets the width of the logo defined in the logo `path` parameter. This is helpful if your logo is a dimension that doesn't quite work with the logo container on the page.                                                                                                        |

#### Example

```yaml
branding:
  logo:
    favicons: "ui/images/favicons/"
    path: "ui/images/hyperglass-dark.png"
    width: 384
```

### credit

| Field                                     | Default                                     | Description                                                                                |
| ----------------------------------------- | ------------------------------------------- | ------------------------------------------------------------------------------------------ |
| <FieldName name="enable" type="boolean"/> | <FieldDefault type="boolean" value="true"/> | Enables or disables the footer object crediting hyperglass and linking to the GitHub page. |

#### Example

```yaml
branding:
  credit:
    enable: true
```

### peeringdb

| Field                                     | Default                                     | Description                                                                                                                                                                       |
| ----------------------------------------- | ------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <FieldName name="enable" type="boolean"/> | <FieldDefault type="boolean" value="true"/> | Enables or disables the PeeringDB link in the footer. If set to `true`, the [`primary_asn`](#general) will be automatically used to create the URL to your ASN's PeeringDB entry. |

#### Example

```yaml
branding:
  peeringdb:
    enable: true
```

### terms

| Field                                     | Default                                     | Description                                                          |
| ----------------------------------------- | ------------------------------------------- | -------------------------------------------------------------------- |
| <FieldName name="enable" type="boolean"/> | <FieldDefault type="boolean" value="true"/> | Enables or disables the Terms & Conditions popup item in the footer. |

#### Example

```yaml
branding:
  terms:
    enable: true
```

### text

| Field                                            | Default                                               | Description                                                                                                                                                                                                                                                                               |
| ------------------------------------------------ | ----------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <FieldName name="bgp_aspath" type="string"/>     | <FieldDefault type="string" value="BGP AS Path"/>     | Sets display text for the BGP AS Path feature.                                                                                                                                                                                                                                            |
| <FieldName name="bgp_community" type="string"/>  | <FieldDefault type="string" value="BGP Community"/>   | Sets display text for the BGP Community feature.                                                                                                                                                                                                                                          |
| <FieldName name="bgp_route" type="string"/>      | <FieldDefault type="string" value="BGP Route"/>       | Sets display text for the BGP Route feature.                                                                                                                                                                                                                                              |
| <FieldName name="ping" type="string"/>           | <FieldDefault type="string" value="Ping"/>            | Sets display text for the Ping feature.                                                                                                                                                                                                                                                   |
| <FieldName name="traceroute" type="string"/>     | <FieldDefault type="string" value="Traceroute"/>      | Sets display text for the Traceroute feature.                                                                                                                                                                                                                                             |
| <FieldName name="terms" type="string"/>          | <FieldDefault type="string" value="Terms"/>           | Sets the display text for the Terms & Conditions footer item.                                                                                                                                                                                                                             |
| <FieldName name="peeringdb" type="string"/>      | <FieldDefault type="string" value="PeeringDB"/>       | Sets the display text for the PeeringDB footer item.                                                                                                                                                                                                                                      |
| <FieldName name="info" type="string"/>           | <FieldDefault type="string" value="Help"/>            | Sets the display text for the Help footer item.                                                                                                                                                                                                                                           |
| <FieldName name="query_location" type="string"/> | <FieldDefault type="string" value="Location"/>        | Sets the display text for the Query Location field.                                                                                                                                                                                                                                       |
| <FieldName name="query_target" type="string"/>   | <FieldDefault type="string" value="Target"/>          | Sets the display text for the Query Target field.                                                                                                                                                                                                                                         |
| <FieldName name="query_type" type="string"/>     | <FieldDefault type="string" value="Query Type"/>      | Sets the display text for the Query Type field.                                                                                                                                                                                                                                           |
| <FieldName name="query_vrf" type="string"/>      | <FieldDefault type="string" value="Routing Table"/>   | Sets the display text for the Query VRF field.                                                                                                                                                                                                                                            |
| <FieldName name="title_mode" type="string"/>     | <FieldDefault type="string" value="logo_only"/>       | Sets the "mode" for the title/heading area above the main form. Accepted values are `logo_only`, `text_only`, `logo_title`, or `all`.                                                                                                                                                     |
| <FieldName name="title" type="string"/>          | <FieldDefault type="string" value="hyperglass"/>      | If `title_mode` is set to `text_only` or `all`, this text will be the larger of the two text blocks. If `title_mode` is set to `logo_title`, this text will be the only text displayed, and will be slightly smaller. If `title_mode` is set to `logo_only`, this text will not be shown. |
| <FieldName name="subtitle" type="string"/>       | <FieldDefault type="string" value="AS{primary_asn}"/> | If `title_mode` is set to `text_only` or `all`, this text will be the smaller of the two text blocks. If `title_mode` is set to `logo_only` or `logo_title`, this text will not be shown.                                                                                                 |

#### error404

Options for the 404 error page, displayed when someone tries to visit a URI that doesn't exist. For example "lg.as65000.net/fake".

| Field                                      | Default                                                    | Description                                                                                        |
| ------------------------------------------ | ---------------------------------------------------------- | -------------------------------------------------------------------------------------------------- |
| <FieldName name="button" type="string"/>   | <FieldDefault type="string" value="Home"/>                 | Sets the display text for the button on the 404 error page.                                        |
| <FieldName name="subtitle" type="string"/> | <FieldDefault type="string" value="{uri} isn't a thing."/> | Sets the subtitle on the 404 error page. `{uri}` maps to the URI that was attempted and not found. |
| <FieldName name="title" type="string"/>    | <FieldDefault type="string" value="Error"/>                | Sets the title on the 404 error page.                                                              |

#### error500

Options for the 500 error page, displayed when general server errors occur.

| Field                                      | Default                                                     | Description                                                 |
| ------------------------------------------ | ----------------------------------------------------------- | ----------------------------------------------------------- |
| <FieldName name="button" type="string"/>   | <FieldDefault type="string" value="Home"/>                  | Sets the display text for the button on the 500 error page. |
| <FieldName name="subtitle" type="string"/> | <FieldDefault type="string" value="Something Went Wrong."/> | Sets the subtitle on the 500 error page.                    |
| <FieldName name="title" type="string"/>    | <FieldDefault type="string" value="Error"/>                 | Sets the title on the 500 error page.                       |

#### Example

```yaml
branding:
  text:
    bgp_aspath: "BGP AS Path"
    bgp_community: "BGP Community"
    bgp_route: "BGP Route"
    ping: "Ping"
    traceroute: "Traceroute"
    info: "Help"
    peeringdb: "PeeringDB"
    query_location: "Location"
    query_target: "Target"
    query_type: "Query Type"
    subtitle: "AS{primary_asn}"
    terms: "Terms"
    title: "hyperglass"
    title_mode: "logo_only"
    vrf: "Routing Table"
    error404:
      button: "Home"
      subtitle: "{uri} isn't a thing"
      title: "Error"
    error500:
      button: "Home"
      subtitle: "Something Went Wrong"
      title: "Error"
```

## features

### bgp_aspath

| Field                                     | Default                                     | Description                                     |
| ----------------------------------------- | ------------------------------------------- | ----------------------------------------------- |
| <FieldName name="enable" type="boolean"/> | <FieldDefault type="boolean" value="true"/> | Enables or disables the BGP AS Path query type. |

#### regex

Override the default regex patterns for validating BGP AS Path input.

| Field                                     | Default                                       | Description                                                                                                           |
| ----------------------------------------- | --------------------------------------------- | --------------------------------------------------------------------------------------------------------------------- |
| <FieldName name="mode" type="string"/>    | <FieldDefault type="string" value="asplain"/> | Sets the [AS Path type](https://tools.ietf.org/html/rfc539) used **network-wide**. Options are `asplain`, `asdot`.    |
| <FieldName name="asdot" type="string"/>   | <Regex type="string" value="aspath_asdot"/>   | Regex pattern used to validate `asplain` formatted AS numbers in an AS_PATH. Only used if `mode` is set to `asplain.` |
| <FieldName name="asplain" type="string"/> | <Regex type="string" value="aspath_asplain"/> | Regex pattern used to validate `asdot` formatted AS numbers in an AS_PATH. Only used if `mode` is set to `asdot.`     |

<Admonition type="warning" title="AS_PATH Format">

This pattern will be used to validate AS_PATH queries to your routers, so it should match the pattern your routers actually use or understand.

</Admonition>

### bgp_community

| Field                                     | Default                                     | Description                                       |
| ----------------------------------------- | ------------------------------------------- | ------------------------------------------------- |
| <FieldName name="enable" type="boolean"/> | <FieldDefault type="boolean" value="true"/> | Enables or disables the BGP Community query type. |

Override the default regex patterns for validating BGP Community input.

#### regex

| Field                                         | Default                                                 | Description                      |
| --------------------------------------------- | ------------------------------------------------------- | -------------------------------- |
| <FieldName name="decimal" type="string"/>     | <FieldDefault type="string" value="community_decimal"/> | Decimal/32 bit community format. |
| <FieldName name="extended_as" type="string"/> | <Regex type="string" value="community_extended"/>       | Extended community format        |
| <FieldName name="large" type="string"/>       | <Regex type="string" value="community_large"/>          | Large community format           |

### bgp_route

| Field                                     | Default                                     | Description                                   |
| ----------------------------------------- | ------------------------------------------- | --------------------------------------------- |
| <FieldName name="enable" type="boolean"/> | <FieldDefault type="boolean" value="true"/> | Enables or disables the BGP Route query type. |

### ping

| Field                                     | Default                                     | Description                              |
| ----------------------------------------- | ------------------------------------------- | ---------------------------------------- |
| <FieldName name="enable" type="boolean"/> | <FieldDefault type="boolean" value="true"/> | Enables or disables the Ping query type. |

### traceroute

| Field                                     | Default                                     | Description                                    |
| ----------------------------------------- | ------------------------------------------- | ---------------------------------------------- |
| <FieldName name="enable" type="boolean"/> | <FieldDefault type="boolean" value="true"/> | Enables or disables the Traceroute query type. |

#### Example

```yaml
features:
  bgp_aspath:
    enable: true
    regex:
      asdot: "^(\^|^\_)((\d+\.\d+)\_|(\d+\.\d+)\$|(\d+\.\d+)\(\_\.\+\_\))+$"
      asplain: "^(\^|^\_)(\d+\_|\d+\$|\d+\(\_\.\+\_\))+$"
      mode: "asplain"
  bgp_community:
    enable: true
    regex:
      decimal: "^[0-9]{1,10}$"
      extended_as: "^([0-9]{0,5})\:([0-9]{1,5})$"
      large: "^([0-9]{1,10})\:([0-9]{1,10})\:[0-9]{1,10}$"
  bgp_route:
    enable: true
  ping:
    enable: true
  traceroute:
    enable: true
```

### cache

hyperglass supports caching the application's responses for a configurable period of time to reduce the number of lookups passed back to routers for repetitive/common lookups. By default, all application responses (including error messages), are cached for 2 minutes in the local file system.

To accomplish this, hyperglass makes use of a Redis database, with a stringified combination of location name, query type, and target as a key, and the output and status code as values. If a lookup matching the exact key is found, the cached value will be returned. If not, a standard lookup is performed (and that data is subsequently cached).

| Field                                        | Default                                                                     | Description                                                              |
| -------------------------------------------- | --------------------------------------------------------------------------- | ------------------------------------------------------------------------ |
| <FieldName name="redis_id" type="integer"/>  | <FieldDefault type="integer" value="0"/>                                    | Sets the Redis database ID where the back-end responses are cached.      |
| <FieldName name="show_text" type="boolean"/> | <FieldDefault type="boolean" value="true"/>                                 | If `true`, a message will be displayed at the bottom of the results box. |
| <FieldName name="text" type="string"/>       | <FieldDefault type="string" value="Results will be cached for 2 minutes."/> | Sets the caching message text if `show_text` is `true`.                  |
| <FieldName name="timeout" type="integer"/>   | <FieldDefault type="integer" value="120"/>                                  | Sets the number of **seconds** to cache the back-end response.           |

#### Example

```yaml
features:
  cache:
    redis_id: 0
    show_text: true
    text: Results will be cached for 2 minutes.
    timeout: 120
```

### max_prefix

If enabled, the prefix length of BGP Route queries must be shorter than the `max_prefix_length_ipv4` and `max_prefix_length_ipv6` parameters.

| Field                                     | Default                                      | Description                                                         |
| ----------------------------------------- | -------------------------------------------- | ------------------------------------------------------------------- |
| <FieldName name="enable" type="boolean"/> | <FieldDefault type="boolean" value="false"/> | Enables/disables Max Prefix feature.                                |
| <FieldName name="ipv4" type="integer"/>   | <FieldDefault type="integer" value="24"/>    | Sets the maxiumum prefix length allowed for IPv4 BGP Route queries. |
| <FieldName name="ipv6" type="integer"/>   | <FieldDefault type="integer" value="64"/>    | Sets the maxiumum prefix length allowed for IPv6 BGP Route queries. |

#### Example

```yaml
features:
  max_prefix:
    enable: false
    ipv4: 24
    ipv6: 64
```

### rate_limit

hyperglass supports configurable rate limiting of both site loads and queries. By default, users are able to reach the site up to 60 times per minute, and submit up to 5 queries per minute. When the site limit is reached, users are directed to a separate error page until the timer expires. When the query limit is reached, an error message is displayed, and no further queries are allowed until the timer expires.

| Field                                       | Default                                  | Description                                                                 |
| ------------------------------------------- | ---------------------------------------- | --------------------------------------------------------------------------- |
| <FieldName name="redis_id" type="integer"/> | <FieldDefault type="integer" value="1"/> | Sets the Redis database ID where the back-end rate-limiting data is stored. |

#### query

| Field                                     | Default                                                                                                                                        | Description                                                                                                                            |
| ----------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------- |
| <FieldName name="button" type="string"/>  | <FieldDefault type="string" value="Try Again"/>                                                                                                | Button text on Rate Limit error message.                                                                                               |
| <FieldName name="message" type="string"/> | <FieldDefaultBlock language="python" type="string" value="Query limit of {rate} per {period} reached. Please wait one minute and try again."/> | Message presented to the user when the query limit is reached. `{rate}` and `{period}` will be formatted with their respective values. |
| <FieldName name="rate" type="integer"/>   | <FieldDefault type="integer" value="5"/>                                                                                                       | Sets the number of queries per `period` allowed from the remote IP address of the request.                                             |
| <FieldName name="period" type="string"/>  | <FieldDefault type="string" value="minute"/>                                                                                                   | Sets the time period to which `rate` applies.                                                                                          |
| <FieldName name="title" type="string"/>   | <FieldDefault type="string" value="Query Limit Reached"/>                                                                                      | Title text on Rate Limit error message.                                                                                                |

#### site

| Field                                      | Default                                                                                                                               | Description                                                                                |
| ------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------ |
| <FieldName name="button" type="string"/>   | <FieldDefault type="string" value="Try Again"/>                                                                                       | Button text on Rate Limit error page.                                                      |
| <FieldName name="rate" type="integer"/>    | <FieldDefault type="integer" value="60"/>                                                                                             | Sets the number of queries per `period` allowed from the remote IP address of the request. |
| <FieldName name="period" type="string"/>   | <FieldDefault type="string" value="minute"/>                                                                                          | Sets the time period to which `rate` applies.                                              |
| <FieldName name="subtitle" type="string"/> | <FieldDefaultBlock language="python" type="string" value="You have accessed this site more than {rate} times in the last {period}."/> | Subtitle text on Rate Limit error page.                                                    |
| <FieldName name="title" type="string"/>    | <FieldDefault type="string" value="Limit Reached"/>                                                                                   | Title text on Rate Limit error page.                                                       |

#### Example

```yaml
features:
  rate_limit:
    query:
      button: "Try Again"
      message: Query limit of {rate} per {period} reached. Please wait one minute and try again."
      period: minute
      rate: 5
      title: "Query Limit Reached"
    redis_id: 1
    site:
      button: "Try Again"
      period: "minute"
      rate: 60
      subtitle: "You have accessed this site more than {rate} times in the last {period}."
      title: "Limit Reached"
```

<!--
# messages:
#   acl_denied: '{target} is a member of {denied_network}, which is not allowed.'
#   acl_not_allowed: '{target} is not allowed.'
#   authentication_error: Authentication error occurred.
#   connection_error: 'Error connecting to {device_name}: {error}'
#   directed_cidr: '{query_type} queries can not be in CIDR format.'
#   feature_not_enabled: '{feature} is not enabled for {device_name}.'
#   general: Something went wrong.
#   invalid_field: '{input} is an invalid {field}.'
#   invalid_input: '{target} is not a valid {query_type} target.'
#   max_prefix: Prefix length must be shorter than /{max_length}. {target} is too specific.
#   no_input: '{field} must be specified.'
#   no_matching_vrfs: No VRFs Match
#   no_output: No output.
#   noresponse_error: No response.
#   request_timeout: Request timed out.
#   requires_ipv6_cidr: '{device_name} requires IPv6 BGP lookups to be in CIDR notation.'
#   vrf_not_associated: VRF {vrf_name} is not associated with {device_name}.
-->
